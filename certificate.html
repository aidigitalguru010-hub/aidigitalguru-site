<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Certificate Verification | AI DIGITAL GURU</title>
    <link rel="stylesheet" href="assets/css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        :root { --gold: #c5a059; --dark: #020c1b; --navy: #0a192f; --card: #112240; --slate: #8892b0; }
        body { background: var(--dark); color: white; font-family: 'Inter', sans-serif; margin: 0; overflow-x: hidden; }
        
        /* Navigation Fix */
        header { 
            background: rgba(10, 25, 47, 0.98); 
            padding: 10px 5%; 
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
            position: sticky; 
            top: 0; 
            z-index: 1000; 
            border-bottom: 1px solid #233554; 
            backdrop-filter: blur(10px); 
        }
        .logo img { height: 55px; width: auto; display: block; }
        nav { display: flex; gap: 15px; align-items: center; }
        nav a { color: #fff; text-decoration: none; font-size: 14px; transition: 0.3s; padding: 5px 10px; }
        nav a:hover, nav a.active { color: var(--gold); }
        .exam-link { color: #28a745 !important; font-weight: bold; border: 1px solid #28a745; border-radius: 5px; }

        /* Verification UI */
        .verify-section { padding: 100px 5% 60px; text-align: center; background: radial-gradient(circle at center, #112240 0%, #020c1b 100%); }
        .verify-section h1 { color: var(--gold); font-size: clamp(2rem, 8vw, 3rem); margin-bottom: 15px; }
        
        .search-container { max-width: 600px; margin: 40px auto; background: var(--card); padding: 40px; border-radius: 20px; border: 1px solid rgba(255,255,255,0.05); box-shadow: 0 10px 40px rgba(0,0,0,0.5); }
        
        .input-group { position: relative; display: flex; flex-direction: column; gap: 15px; }
        input#cid { padding: 16px; border-radius: 10px; border: 1px solid #233554; background: #0a192f; color: white; outline: none; font-size: 16px; text-align: center; transition: 0.3s; }
        input#cid:focus { border-color: var(--gold); box-shadow: 0 0 15px rgba(197, 160, 89, 0.2); }
        
        .btn-verify { padding: 16px; background: var(--gold); color: var(--dark); border: none; border-radius: 10px; font-weight: 800; font-size: 16px; cursor: pointer; transition: 0.3s; text-transform: uppercase; }
        .btn-verify:hover { background: white; transform: translateY(-3px); }

        #res { margin-top: 30px; border-radius: 15px; transition: 0.5s; overflow: hidden; }
        .valid { border: 2px solid var(--gold); background: rgba(197, 160, 89, 0.1); padding: 30px; animation: fadeIn 0.5s ease-in-out; }
        .invalid { border: 2px solid #ff4d4d; background: rgba(255, 77, 77, 0.1); padding: 25px; color: #ff4d4d; }
        .loading { color: var(--gold); font-style: italic; animation: pulse 1.5s infinite; }

        .download-btn { margin-top: 20px; padding: 12px 25px; background: #28a745; color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: bold; transition: 0.3s; display: inline-flex; align-items: center; gap: 10px; }
        .download-btn:hover { background: #218838; transform: scale(1.05); }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes pulse { 0% { opacity: 0.5; } 50% { opacity: 1; } 100% { opacity: 0.5; } }

        @media (max-width: 768px) { nav { display: none; } .search-container { padding: 30px 20px; } }
    </style>
</head>
<body>

<header>
    <div class="logo">
        <a href="index.html">
            <img src="assets/Img/logo.png" alt="AI DIGITAL GURU" onerror="this.src='https://via.placeholder.com/150x50?text=AI+GURU'">
        </a>
    </div>
    <nav>
      <a href="index.html">Home</a>
      <a href="services.html">Services</a>
      <a href="courses.html">Courses</a>
      <a href="exam.html" class="exam-link">Online Exam</a>
      <a href="certificate.html" class="active" style="color:var(--gold); font-weight:bold;">Verification</a>
      <a href="contact.html">Contact</a>
    </nav>
</header>

<section class="verify-section">
    <h1>Verify <span>Certificate</span></h1>
    <p style="color: var(--slate);">Verify official records and download digital credentials instantly.</p>

    <div class="search-container">
        <div class="input-group">
            <input id="cid" type="text" placeholder="Enter Certificate ID (e.g. ADG-1001)">
            <button class="btn-verify" onclick="verify()">
                <i class="fas fa-search"></i> Verify & Download
            </button>
        </div>
        <div id="res"></div>
    </div>
</section>

<footer style="padding: 60px 5%; background: #020c1b; border-top: 1px solid #112240; text-align: center;">
    <p style="color: var(--gold); font-weight: bold;">MSME: UDYAM-CG-06-0006341</p>
    <p style="color: var(--slate); font-size: 13px; margin-top: 10px;">¬© 2025 AI DIGITAL GURU | Janjgir-Champa, Chhattisgarh</p>
</footer>

<script>
const API="https://script.google.com/macros/s/AKfycby5c8X5Mw-Tc8RvpkDtga4MDf3cB-p7raS3WJ82WdImdhtxyn7zXtq5to9F7v5dWuAmsA/exec";
const { jsPDF } = window.jspdf;

function verify(){
    const res = document.getElementById("res");
    const cid = document.getElementById("cid").value.trim();

    if(!cid) {
        alert("Please enter a Certificate ID");
        return;
    }

    res.innerHTML = "<p class='loading'>üîÑ Searching AI Digital Guru Database...</p>";

    fetch(API+"?id="+cid)
    .then(r => r.json())
    .then(d => {
        if(d.status === "valid"){
            res.className = "valid";
            res.innerHTML = `
                <h3 style="margin:0; color:var(--gold);"><i class="fas fa-check-circle"></i> VERIFIED RECORD</h3>
                <hr style="border:0; border-top:1px solid rgba(197, 160, 89, 0.3); margin:20px 0;">
                <p style="text-align:left; margin:10px 0;"><strong>Student:</strong> ${d.name}</p>
                <p style="text-align:left; margin:10px 0;"><strong>Course:</strong> ${d.course}</p>
                <p style="text-align:left; margin:10px 0; font-size: 0.85em; color:var(--slate);">Auth: MSME UDYAM-CG-06-0006341</p>
                <button class="download-btn" onclick="generatePDF('${d.name}', '${d.course}', '${cid}')">
                    <i class="fas fa-file-pdf"></i> Download PDF
                </button>
            `;
        } else {
            res.className = "invalid";
            res.innerHTML = "<h3><i class='fas fa-times-circle'></i> Record Not Found</h3><p>Please check the ID or contact the institute.</p>";
        }
    })
    .catch(err => {
        res.innerHTML = "<p style='color:#ff4d4d;'>‚ö†Ô∏è Connection Error. Try again later.</p>";
    });
}

function generatePDF(name, course, id) {
    const doc = new jsPDF({ orientation: "landscape", unit: "mm", format: "a4" });
    doc.setFillColor(10, 25, 47); doc.rect(0, 0, 297, 210, 'F');
    doc.setDrawColor(197, 160, 89); doc.setLineWidth(3); doc.rect(10, 10, 277, 190);
    doc.setTextColor(197, 160, 89); doc.setFontSize(45); doc.text("AI DIGITAL GURU", 148, 45, { align: "center" });
    doc.setTextColor(255, 255, 255); doc.setFontSize(22); doc.text("CERTIFICATE OF COMPLETION", 148, 65, { align: "center" });
    doc.setFontSize(16); doc.text("This is to certify that", 148, 90, { align: "center" });
    doc.setTextColor(197, 160, 89); doc.setFontSize(35); doc.text(name.toUpperCase(), 148, 110, { align: "center" });
    doc.setTextColor(255, 255, 255); doc.setFontSize(16); doc.text("has successfully completed the course in", 148, 130, { align: "center" });
    doc.setFontSize(24); doc.text(course, 148, 150, { align: "center" });
    doc.setFontSize(12); doc.text(`Certificate ID: ${id}`, 25, 180);
    doc.text(`Date: ${new Date().toLocaleDateString()}`, 25, 188);
    doc.setTextColor(197, 160, 89); doc.text("MSME REG: UDYAM-CG-06-0006341", 272, 180, { align: "right" });
    doc.save(`${name}_Certificate.pdf`);
}
</script>

</body>
</html>
